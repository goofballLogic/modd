<!doctype html>
<html lang="en-GB">

<head>
  <meta charset="utf-8">
  <title>Message oriented Domain Design</title>
  <meta name="description"
    content="Message oriented domain design using javascript functions as first-class aggregate roots / entities">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./css/main.css">
  <script src="./js/main.js" type="module"></script>
</head>

<body>
  <header>
    <h1>Message oriented Domain Design</h1>
    <p>Message oriented domain design using javascript functions as first-class aggregate roots / entities</p>
  </header>
  <main>
    <p>
      The technique described on this site attempts to extrapolate Alan Kay's concept of biological (cellular) automota
      coordinating their behaviour by means of message exchange.
      The site describes terms such as:
    </p>
    <ul>
      <li><a>domain</a></li>
      <li><a>bounded context</a></li>
      <li><a>aggregate root</a></li>
      <li><a>entity</a></li>
      <li><a>value</a></li>
      <li><a>factory</a></li>
    </ul>
    <p>
      These concepts are used widely in Domain Driven Design (DDD) but the chosen characteristics (both strategic and
      tactical) are specific to DDD.
      <br />
      <br />
      Below, I define the strategic characteristics of the each concept as applied to this technique.
      I point out similarities and differences between this technique and DDD.
      I also include some some initial hints of tactical patterns used to apply them.
    </p>

    <h2>Concepts similar to DDD</h2>
    <h3>Entity</h3>
    <p>
      An entity is defined as a state-encapsulating object which interacts with the outside world via messages (an
      "object" in Alan Kay's conception of object-orientation).
      <br />
      <br />
      An entity is a javascript function. It receives messages (by being called), and emits messages (by return).
      <br />
      <br />
      Unlike DDD, an entity should not be considered a candidate for persistance to some storage medium.
      Instead, entities frequently collaborate on the assembly of distinct data documents which can be used as
      models for rendering ephemeral (e.g. UI) or persisted (e.g. database) views.
    </p>
    <h3>Value</h3>
    <p>
      Like DDD value objects, value objects are entirely defined by the value of its attributes.
      <br />
      <br />
      They are frequently used as the value-bearing portion of a message which can received or emitted by an
      entity.
    </p>
    <h3>Aggregate root</h3>
    <p>
      Similar to DDD, aggregate roots are entities which are responsible for the coordination of other entities
      via (re-)distribution of messages to entities contained within the aggregate.
    </p>
    <h3>Bounded context</h3>
    <p>TBD</p>

    <h2>Concepts differing widely from DDD counterparts</h2>
    <h3>Domain</h3>
    <p>TBD</p>

    <h2>Concepts not common to DDD</h2>
    <h3>Message</h3>
    <p>
      A message is a signal sent to/from an entity and/or aggregate root.
      It is similar to the concept of an "event" or "Domain Event" in DDD in that it usually describes something
      which has happened.
      However, messages are the bread-and-butter of this technique.
      They are not reserved for course-grained interactions.
      <br />
      <br />
      A message consists of two parts:
    </p>
    <ol>
      <li>Message type</li>
      <li>Message values</li>
    </ol>
    <p>
      A message type is represented as a javascript <a>Symbol</a>.
      Message values are contained in a plain javascript <a>object</a>.
      <br />
      <br />
      A message is passed to an entity by passing it as parameters:
      <br />
      <code>
// message data
const added = Object.freeze({
  id: uuid(),
  sku: "UGG-BB-PUR-06",
  name: "UGG boots (purple)",
  price: 49.99
  quantity: 1
  unit: "pair"
});

// send a message
result = await cart(itemsAdded, added);
      </code>
    </p>
  </main>
  <footer>
    Version 0.7
  </footer>
</body>

</html>